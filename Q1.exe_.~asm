.MODEL SMALL
.STACK 64
.DATA
COUNT DW 5
ARRAY1 DB 1,2,3,4,5,6,7,8,9,10,11,12
ARRAY2 DB 1,2,3,4,5,6,7,8,9,10,11,12
WORDPTR DW ?
NUMBER_SIZE EQU 2
NUM DB 3,?, 3 dup(0)
NUMCONVERTED DB 30 DUP(0)
MSGA DB "Enter A: $"
MSGB DB "Enter B: $"
CURRENT_MAX_DIV DB 0
MAX_DIV DB 0
INDEX DB 0
.CODE
;
NEWLINE MACRO
mov ah,2
mov dl,10
int 21h
mov ah,2
mov dl,13
int 21h
ENDM NEWLINE

PRINT_LINES MACRO
MOV CL,COUNT

LEA SI,ANUM
GET_NUMBER:
; PRINT

; GET NUMBER FROM USER
PUSHA
MOV BH,0
GET_DECIMAL A,SI
POPA
INC SI
NEWLINE
DEC CL
JNZ GET_NUMBER

ENDM PRINT_LINES
GET_DECIMAL MACRO NUM,NUMCONVERTED
LOCAL CONVERT,CONVERTWHOLE
;READ NUMBER FROM USER 00-99
MOV AH,0AH
LEA DX,NUM
INT 21H
;CONVERT FROM ASCII TO DECIMAL NUMBER
LEA SI,NUM+3
MOV CX,NUMBER_SIZE
MOV BL,1
CONVERT:
MOV AL,[SI] ; Get least significant digit
SUB AL,30H  ; Convert to decimal
MUL BL      ; Get exponent
MOV [SI],AL ; Write back result
MOV AL,BL   ; Multiply BL * 10
MOV BH,10
MUL BH
MOV BL,AL
DEC SI      ; Get next higher significant digit
LOOP CONVERT
;CONVERT FROM DECIMAL TO WHOLE DECIMAL 10,8 -> 18
MOV CX,(NUMBER_SIZE-1)
LEA SI,NUM+3
MOV DI,NUMCONVERTED
CONVERTWHOLE:
MOV AL,[SI] ;Get first num
DEC SI
MOV BL,[SI] ;Get second num
MOV DL,[DI] ;Get previous sum
ADD DL,BL
ADD DL,AL   ; DL = AL + BL + DL
MOV [DI],DL ; Write back result and repeat
LOOP CONVERTWHOLE
MOV DI,NUMCONVERTED
ENDM GET_DECIMAL
MAIN PROC FAR
MOV AX,@DATA
MOV DS,AX

MOV CX,COUNT
LEA SI,NUMCONVERTED
MOV WORDPTR,SI
GET_NUMBERS:

PUSHA
GET_DECIMAL NUM,WORDPTR
POPA
INC WORDPTR
LOOP GET_NUMBERS
; LOOP ON ALL NUMBERS AND FIND COMMON DIVISIORS
MOV CX,COUNT
LEA SI,NUMCONVERTED

CHECK_DIV:
MOV AH,0
; GET NUMBERS
PUSH CX
MOV CX,COUNT

LEA DI,NUMCONVERTED
MOV CURRENT_MAX_DIV,0
ALL_NUM_LOOPS:
LEA SI,NUMCONVERTED
MOV AL,[SI]
MOV BL,[DI]
; DIVIDE HERE
CMP AL,BL
JB NOT_DIVISIBLE
DIV BL
CMP AH,00
JNZ NOT_DIVISIBLE
INC CURRENT_MAX_DIV
NOT_DIVISIBLE:

INC DI
LOOP ALL_NUM_LOOPS
; SET NEW MAX
MOV AL,MAX_DIV
CMP AL,CURRENT_MAX_DIV
JA NOT_NEW_MAX
MOV AL,CURRENT_MAX_DIV

MOV MAX_DIV,AL
mov bl,[si]
MOV INDEX,bl
NOT_NEW_MAX:
INC SI
POP CX
LOOP CHECK_DIV








MAIN ENDP
END MAIN



; [SOURCE]: C:\Users\h4z3m\Desktop\Files\College\2nd\1st Semester\CMPN201\Labs\Sheet4\Q1.asm
